<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE -- ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: docs/can-guides/commitment/recipes/video-player/video-player.md
	@page guides/recipes/video-player
######################################################################## -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CanJS - Video Player (Simple)</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	
		<link rel="stylesheet" type="text/css" href="../../static/bundles/bit-docs-site/static.css">
		<link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" href="/docs/images/canjs_favicon.ico">
		<link rel="apple-touch-icon" sizes="57x57" href="../../../docs/images/canjs_favicon_57x57.png">
		<link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../docs/images/canjs_favicon_57x57.png">
		<link rel="apple-touch-icon" sizes="72x72" href="../../../docs/images/canjs_favicon_72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="../../../docs/images/canjs_favicon_114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="../../../docs/images/canjs_favicon_128x128.png">
		<link rel="apple-touch-icon" sizes="144x144" href="../../../docs/images/canjs_favicon_144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="../../../docs/images/canjs_favicon_152x152.png">
		<meta content="yes" name="apple-mobile-web-app-capable">
	  	<meta name="apple-mobile-web-app-status-bar-style" content="white-translucent">
	
	
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-2302003-11', 'auto');
			ga('send', 'pageview');
		</script>
	
</head>
	<body>
		<input type="checkbox" id="nav-trigger" class="nav-trigger"/>
		<label for="nav-trigger">Menu</label>
	  	<div id="everything">
  <div id="left" class="column">
    <div class="top-left">
      
          <div class="brand">
	<div class="logo">
		<a href="../../../index.html" alt="CanJS"></a>
		<div class="dropdown project-dropdown">
			<a href="https://donejs.com/">DoneJS</a>
			<a href="https://stealjs.com/">StealJS</a>
			<a href="https://jquerypp.com/">jQuery++</a>
			<a href="https://funcunit.com/">FuncUnit</a>
			<a href="https://documentjs.com/">DocumentJS</a>
		</div>
	</div>
	<div class="version">
		<div class="version-number">
			4.2.0
		</div>
		<div class="dropdown version-dropdown">
			
				<a href="https://v3.canjs.com">3.12.1</a>
			
				<a href="https://v2.canjs.com">2.3.33</a>
			
		</div>
	</div>
</div>
<div class="search-bar">
	<div class="search-wrap" style="display:none;">
		<span class="search-icon"></span>
		<input
			type="text"
			size="6"
			class="search"
			placeholder="Search"
			autocomplete="off"
			autocorrect="off"
			autocapitalize="none"
			spellcheck="false"/>
			<span class="search-icon-cancel"></span>
	</div>
</div>


      
    </div>
    <div class="bottom">
      <div class="nav-menu">
        <div class="social-side-container">
          <ul class="social-side">
  <li>
    <a class="header-mobile github" href="https://github.com/canjs/canjs" target="_blank"><img class="social-icon-small" src="../../../docs/images/github.png">Github</a>
  </li>
  <li>
    <a class="header-mobile twitter" href="https://twitter.com/canjs" target="_blank"><img class="social-icon-small" src="../../../docs/images/twitter.png">Twitter</a>
  </li>
</ul>
<ul class="social-side">
  <li>
    <a class="header-mobile" href="https://gitter.im/canjs/canjs" target="_blank">Chat</a>
  </li>
  <li>
    <a class="header-mobile" href="http://forums.donejs.com/c/canjs" target="_blank">Forum</a>
  </li>
</ul>

        </div>
        
            
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../about.html"
							title="Learn about CanJS’s mission, technical highlights, who uses CanJS, and our future roadmap.">
							About
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						parent
           						expanded">
						<a class="page"
							href="../../guides.html"
							title="Welcome to CanJS! These guides are here to help you master CanJS development, get involved with the CanJS community,
and contribute back to CanJS.">
							Guides
						</a>
						
	<ul>
		
			
				
					<li>
						<span>experiment</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../chat.html"
							title="This guide will walk you through building a real-time chat application with CanJS’s Core libraries.  It takes about 30 minutes to complete.">
							Chat Guide
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../todomvc.html"
							title="This guide will walk you through building a slightly modified version of TodoMVC with CanJS’s Core libraries and can-fixture. It takes about 1 hour to complete.">
							TodoMVC Guide
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../atm.html"
							title="This guide will walk you through building and testing an Automated Teller Machine (ATM) application with CanJS’s
Core libraries.  You’ll learn how to do test driven development (TDD)
and manage complex state.  It takes about 2 hours to complete.">
							ATM Guide
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>getting started</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../setup.html"
							title="Get started with CanJS by installing it with npm, using a JS Bin, or just adding it to an HTML page with a &lt;script&gt; tag.">
							Setting Up CanJS
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../technology-overview.html"
							title="Learn the basics of the core parts of CanJS&#x27;s technology.">
							Technology Overview
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../api.html"
							title="This page walks through how to use and understand CanJS’s API documentation.">
							Reading the Docs (API Guide)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../advanced-setup.html"
							title="Use ES modules&#x27; named exports feature to import just the APIs of CanJS that you are using.">
							Experimental ES Module Usage
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li class="
           						parent
           						expanded">
						<a class="page"
							href="../recipes.html"
							title="A listing of small examples that are useful for learning CanJS.">
							recipes
						</a>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="canvas-clock.html"
							title="This guide walks you through building a clock with the Canvas API.">
							Canvas Clock (Simple)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="credit-card-advanced.html"
							title="This guide walks through building a simple credit card payment form with validations. It doesn’t use
can-define. Instead it uses Kefir.js streams to make a ViewModel.
can-kefir is used to make the Kefir streams observable to can-stache.">
							Credit Card Guide (Advanced)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="credit-card-simple.html"
							title="This guide walks through building a very simple credit card payment form.  It uses Stripe.js v2 API to create a token
which can be used to create a charge.  It also performs
simple validation on the payment form values.">
							Credit Card Guide (Simple)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="cta-bus-map.html"
							title="This guide walks you through showing Chicago Transit Authority (CTA) bus locations on a Google Map.">
							CTA Bus Map (Medium)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="file-navigator-advanced.html"
							title="This guide walks you through building a file navigation widget that requests data with fetch. It takes about 45 minutes to complete.">
							File Navigator Guide (Advanced)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="file-navigator-simple.html"
							title="This guide walks you through building a simple file navigation widget.  It takes about 25 minutes to complete.  It was written with
CanJS 3.10. Check out the file-navigator-advanced
for an example that makes AJAX requests for its data and uses can-component.">
							File Navigator Guide (Simple)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="playlist-editor.html"
							title="Learn how to use YouTube’s API to search for videos and make a playlist.  This makes authenticated requests with OAuth2. It uses jQuery++ for
drag/drop events. It shows using custom attributes and custom events.  This guide takes
an hour to complete.">
							Playlist Editor (Advanced)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="signup-simple.html"
							title="This guide walks through building simple signup, login forms and a logout button.">
							Signup and Login (Simple)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="text-editor.html"
							title="This guide walks you through building a basic rich text editor.">
							Text Editor (Medium)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="todomvc-with-steal.html"
							title="This tutorial walks through building TodoMVC with StealJS. It includes KeyNote presentations
covering CanJS core libraries.">
							TodoMVC with StealJS
						</a>
						

					</li>
				
			
		
			
				
					<li class="current
           						
           						expanded">
						<a class="page"
							href="video-player.html"
							title="This guide walks you through building custom video controls around a video element.">
							Video Player (Simple)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="weather-report-advanced.html"
							title="This guides you through extending the Simple Weather Report Guide to remove imperative code and automatically look up the user’s location using the
browser’s geolocation API.  Both of these will be done with event streams.
This guide continues where the Simple Weather Report Guide left off.  It takes about 25 minutes to complete.  It was written with CanJS 4.1.">
							Weather Report Guide (Advanced)
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="weather-report-simple.html"
							title="This guide walks you through building a simple weather report widget.  It takes about 25 minutes to complete.  It was written with
CanJS 4.1.">
							Weather Report Guide (Simple)
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>topics</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../debugging.html"
							title="Learn how to debug CanJS applications.">
							Debugging
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../forms.html"
							title="Learn how to create amazing &lt;form&gt;s with CanJS.">
							Forms
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>upgrade</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../migrate-3.html"
							title="This guide walks you through the step-by-step process to upgrade a 2.x app to CanJS 3.">
							Migrating to CanJS 3
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../migrate-4.html"
							title="This guide walks you through the step-by-step process to upgrade a 3.x app to CanJS 4.">
							Migrating to CanJS 4
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../upgrade/using-codemods.html"
							title="Learn how to migrate your app to CanJS 3 using can-migrate.">
							Using Codemods
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../api.html"
							title="Welcome to the CanJS API documentation! Learn about all the packages that make-up CanJS and how they work together to help you build amazing applications.">
							API Docs
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../community.html"
							title="Get involved with one of the most inviting communities on the internet!">
							Community
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../contribute.html"
							title="Learn how to contribute to CanJS!">
							Contributing
						</a>
						

					</li>
				
			
		
	</ul>


        
      </div>
      <div class="search-results-container">
	<div class="search-results-wrap"></div>
</div>

    </div>
  </div>
  <div id="right" class="column">
    <div class="top-right">
      <div class="top-right-top">
	<ul class="top-right-bitovi">
	  	<li class="dropdown">
	    	<a href="https://www.bitovi.com" class="bitovi icon-bits">Bitovi</a>
	    	<ul class="dropdown-menu">
	      		<li><a href="https://www.bitovi.com/">Bitovi.com</a></li>
	      		<li><a href="https://www.bitovi.com/blog">Blog</a></li>
	      		<li><a href="https://www.bitovi.com/design">Design</a></li>
	      		<li><a href="https://www.bitovi.com/development">Development</a></li>
	      		<li><a href="https://www.bitovi.com/training">Training</a></li>
	      		<li><a href="https://www.bitovi.com/open-source">Open Source</a></li>
	      		<li><a href="https://www.bitovi.com/about">About</a></li>
	      		<li><a href="https://www.bitovi.com/contact">Contact Us</a></li>
	    	</ul>
	  	</li>
	</ul>
	<div class="brand">
		<div class="logo">
			<a href="../../../index.html" alt="CanJS"></a>
		</div>
	</div>
	<ul class="top-right-links">
  <li>
    <a href="https://gitter.im/canjs/canjs">Chat</a>
  </li>
  <li>
    <a href="http://forums.donejs.com/c/canjs">Forum</a>
  </li>
  <li>
    <a class="github-button nav-social" href="https://github.com/canjs/canjs" data-count-href="/canjs/canjs/stargazers" data-show-count="true">Star</a>
  </li>
  <li>
    <a href="https://twitter.com/canjs" class="twitter-follow-button nav-social" data-show-count="true" data-show-screen-name="false">Follow @canjs</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </li>
</ul>
</div>
<div class="breadcrumb">
	
		<li><a href="../../../index.html">CanJS</a></li>
		<li> / </li>
	
		<li><a href="../../guides.html">Guides</a></li>
		<li> / </li>
	
		<li><a href="../recipes.html">recipes</a></li>
		<li> / </li>
	
	
	<li><a href="video-player.html">Video Player (Simple)</a></li>
	
	<li class="breadcrumb-dropdown-separator"> / </li>
	<li class="breadcrumb-dropdown breadcrumb-on-this-page">
		<a> On this page</a>
		<ul class="on-this-page"></ul>
	</li>
	<div class="nav-toggle" title="Back to top"></div>
</div>


    </div>
    <div class="bottom">
      <article>
  <section class="title">
	<div class="page-type">
		<h1>Video Player (Simple)</h1>
			<ul class="title-social">
				
				
				<li>
					<a class="button-link" href="//github.com/canjs/canjs/edit/master/docs/can-guides/commitment/recipes/video-player/video-player.md">Edit on GitHub</a>
				</li>
				
			</ul>
	</div>
	<div class="clear-both"></div>
	
  
	<section class="description">
    <p>This guide walks you through building custom video controls around a video element.</p>

</section>

  
	
</section>
<section class="on-this-page-table">
	<!--<h2 class="on-this-page-title" data-skip>Page Content</h2>-->
</section>










  
    <section class="body">
    <p>In this guide, you will learn how to create a custom video player using the <code>&lt;video&gt;</code> element. The
custom video player will:</p>
<ul>
<li>Have custom play / pause buttons.</li>
<li>Show the current time and duration of the video.</li>
<li>Have a <code>&lt;input type='range'&gt;</code> slider that can adjust the position of the video.</li>
</ul>
<p>The final widget looks like:</p>
<p><a class="jsbin-embed" href="https://jsbin.com/sekadux/3/embed?html,js,output">JS Bin on jsbin.com</a></p>
<p>The following sections are broken down the following parts:</p>
<ul>
<li><strong>The problem</strong> — A description of what the section is trying to accomplish.</li>
<li><strong>What you need to know</strong> — Information about CanJS that is useful for solving the problem.</li>
<li><strong>How to verify it works</strong> - How to make sure the solution works if it’s not obvious.</li>
<li><strong>The solution</strong> — The solution to the problem.</li>
</ul>
<h2>Setup</h2>
<p><strong>START THIS TUTORIAL BY CLONING THE FOLLOWING JS BIN</strong>:</p>
<blockquote>
<p>Click the <code>JS Bin</code> button.  The JS Bin will open in a new window. In that new window, under <code>File</code>, click <code>Clone</code>.</p>
</blockquote>
<p><a class="jsbin-embed" href="https://jsbin.com/gipisuw/4/edit?html,js,output">CanJS Video Player on jsbin.com</a></p>
<p>This JS Bin:</p>
<ul>
<li>Creates a <code>&lt;video&gt;</code> element that loads a video. <em>Right click and select &quot;Show controls&quot; to see the video's controls</em>.</li>
<li>Loads CanJS.</li>
</ul>
<h3>The problem</h3>
<ul>
<li><p>Create a custom <code>&lt;video-player&gt;</code> element that takes a <code>src</code> attribute and creates a <code>&lt;video&gt;</code> element
within itself. We should be able to create the video like:</p>
<pre><code class="language-html">&lt;video-player src:raw=&quot;https://canjs.com/docs/images/tom_jerry.webm&quot;&gt;
&lt;/video-player&gt;
</code></pre></li>
<li><p>The embedded <code>&lt;video&gt;</code> element should have the native controls enabled.</p></li>
</ul>
<h3>What you need to know</h3>
<p>To setup a basic CanJS application, you define a custom element in JavaScript and
use the custom element in your page’s <code>HTML</code>.</p>
<p>To define a custom element, extend <a href="../../can-component.html" title="Create a custom element that can be used to manage widgets or application logic.">can-component</a> with a <a href="../../can-component.prototype.tag.html" title="Specifies the HTML tag (or node-name) the can-component will be created on.">tag</a>
that matches the name of your custom element.  For example:</p>
<pre><code class="language-js">can.Component.extend({
  tag: &quot;video-player&quot;
})
</code></pre>
<p>Then you can use this tag in your HTML page:</p>
<pre><code class="language-HTML">&lt;video-player&gt;&lt;/video-player&gt;
</code></pre>
<p>But this doesn’t do anything.  Components add their own HTML through their <a href="../../can-component.prototype.view.html" title="Provides a view to render directly within the component’s element. The view is rendered with the
component’s can-component::ViewModel instance.  &lt;content/&gt; elements within the view are replaced by the source elements within the component’s tag.">view</a>
property:</p>
<pre><code class="language-js">can.Component.extend({
  tag: &quot;video-player&quot;,
  view: `&lt;h2&gt;I am a &lt;input value='video'/&gt; player!&lt;/h2&gt;`
});
</code></pre>
<p>A component's <code>view</code> is rendered with it's <a href="../../can-component.prototype.ViewModel.html" title="Provides or describes a constructor function that provides values and methods
to the component’s view. The constructor function
is initialized with values specified by the component element’s data bindings.">ViewModel</a>. For example, we can
make the <code>&lt;input&gt;</code> say <code>&quot;AWESOME VIDEO&quot;</code> by defining a <code>src</code> property and using it in the <code>view</code> like:</p>
<pre><code class="language-js">can.Component.extend({
  tag: &quot;video-player&quot;,
  view: `&lt;h2&gt;I am a &lt;input value='{{src}}'/&gt; player!&lt;/h2&gt;`,
  ViewModel: {
    src: {default: &quot;AWESOME VIDEO&quot;}
  }
});
</code></pre>
<p>But we want the video player to take a <code>src</code> attribute value and use that for the
<code>&lt;input&gt;</code>'s <code>value</code>. For example, if
we wanted the input to say <code>CONFIGURABLE VIDEO</code> instead of <code>video</code>, we would:</p>
<ol>
<li>Update <code>&lt;video-player&gt;</code> to pass <code>&quot;CONFIGURABLE VIDEO&quot;</code> with <a href="../../can-stache-bindings.raw.html" title="One-way bind a string value to the ViewModel or element.">toChild:raw</a>:
<pre><code class="language-html">&lt;video-player src:raw=&quot;CONFIGURABLE VIDEO&quot;/&gt;
</code></pre></li>
<li>Update the <code>ViewModel</code> to define a <code>src</code> property like:
<pre><code class="language-js">can.Component.extend({
  tag: &quot;video-player&quot;,
  view: `&lt;h2&gt;I am a &lt;input value='video'/&gt; player!&lt;/h2&gt;`,
  ViewModel: {
    src: &quot;string&quot;
  }
});
</code></pre></li>
<li>Use the <code>src</code> property in the view:
<pre><code class="language-js">can.Component.extend({
  tag: &quot;video-player&quot;,
  view: `&lt;h2&gt;I am a &lt;input value='{{src}}'/&gt; player!&lt;/h2&gt;`,
  ViewModel: {
    src: &quot;string&quot;
  }
});
</code></pre></li>
</ol>
<p>Finally, to have a <code>&lt;video&gt;</code> element show the <em>native</em> controls, add a <code>controls</code>
attribute like:</p>
<pre><code class="language-js">&lt;video controls&gt;
</code></pre>
<h3>The solution</h3>
<p>Update the <strong>JavaScript</strong> tab to:</p>
<pre><code class="language-js">can.Component.extend({
  tag: 'video-player',
  view: `
    &lt;video controls&gt;
      &lt;source src=&quot;{{src}}&quot;/&gt;
    &lt;/video&gt;
    `,
  ViewModel: {
    src: 'string',
  }
});

</code></pre>
<p><span line-highlight='1-11,only'></span>
Update the <strong>HTML</strong> <code>&lt;body&gt;</code> element to:</p>
<pre><code class="language-html">  &lt;video-player src:raw=&quot;https://canjs.com/docs/images/tom_jerry.webm&quot;&gt;&lt;/video-player&gt;
  &lt;script src=&quot;https://unpkg.com/can@4/dist/global/can.js&quot;&gt;&lt;/script&gt;

</code></pre>
<p><span line-highlight='1,only'></span></p>
<h2>Make play / pause button change as video is played and paused</h2>
<h3>The problem</h3>
<p>When the video is played or paused using the native controls, we want to change the content of a <code>&lt;button&gt;</code>
to say <em>&quot;Play&quot;</em> or <em>&quot;Pause&quot;</em>.</p>
<p>When the video is played, the button should say <em>&quot;Pause&quot;</em>.
When the video is paused, the button should say <em>&quot;Play&quot;</em>.</p>
<p>We want the button to be within a <code>&lt;div&gt;</code> after the video element like:</p>
<pre><code class="language-html">&lt;/video&gt;
&lt;div&gt;
  &lt;button&gt;Play&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<h3>What you need to know</h3>
<ul>
<li><p>To change the HTML content of the page, use <a href="../../can-stache.helpers.if.html" title="can-stache.helpers.if">{{#if(expression)}}</a> and <a href="../../can-stache.helpers.else.html" title="">{{else}}</a> like:</p>
<pre><code class="language-html">&lt;button&gt;{{#if(playing)}}Pause{{else}}Play{{/if}} &lt;/button&gt;
</code></pre></li>
<li><p>The <code>view</code> responds to values in the <code>ViewModel</code>.  To create a <code>boolean</code> value in the <code>ViewModel</code> do:</p>
<pre><code class="language-js">ViewModel: {
  ...
  playing: &quot;boolean&quot;,
}
</code></pre></li>
<li><p>Methods can be used to change the <code>ViewModel</code>.  The following might create methods that<br />
change the <code>playing</code> value:</p>
<pre><code class="language-js">ViewModel: {
  ...
  play() {
    this.playing = true;
  },
  pause() {
    this.playing = false;
  },
}
</code></pre></li>
<li><p>You can listen to events on the DOM with <a href="../../can-stache-bindings.event.html" title="Respond to events on elements or component ViewModels.">on:event</a>.  For example, the following might
listen to a click on a <code>&lt;div&gt;</code> and call <code>doSomething()</code>:</p>
<pre><code class="language-html">&lt;div on:click=&quot;doSomething()&quot;&gt;
</code></pre>
<p><code>&lt;video&gt;</code> elements have a variety of useful <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement">events</a>, including a <code>play</code> and
<code>pause</code> event that is emitted when the video is played or paused.</p></li>
</ul>
<h3>The solution</h3>
<p>Update the <strong>JavaScript</strong> tab to:</p>
<pre><code class="language-js">can.Component.extend({
  tag: 'video-player',
  view: `
    &lt;video controls
      on:play=&quot;play()&quot;
      on:pause=&quot;pause()&quot;&gt;
      &lt;source src=&quot;{{src}}&quot;/&gt;
    &lt;/video&gt;
    &lt;div&gt;
      &lt;button&gt;
        {{#if(playing)}}Pause{{else}}Play{{/if}}
      &lt;/button&gt;
    &lt;/div&gt;
    `,
  ViewModel: {
    src: 'string',
    playing: &quot;boolean&quot;,

    play() {
      this.playing = true;
    },
    pause() {
      this.playing = false;
    },
  }
});

</code></pre>
<p><span line-highlight='5-6,9-13,17,19-24,only'></span></p>
<h2>Make clicking the play/pause button play or pause the video</h2>
<h3>The problem</h3>
<p>When the <em>play/pause</em> <code>&lt;button&gt;</code> we created in the previous section is clicked, we want to
either play or pause the video.</p>
<h3>What you need to know</h3>
<p>CanJS prefers to manage the state of your application in <code>ViewModel</code>. The <code>&lt;video&gt;</code> player has state such as
if the video is <code>playing</code>.  When the <em>play/pause</em> button is clicked, we want to update the state
of the <code>ViewModel</code> and have the <code>ViewModel</code> update the state of the video player as a side effect.</p>
<p>What this means is that instead of something like:</p>
<pre><code class="language-js">togglePlay(){
  if( videoElement.paused ) {
    videoElement.play()
  } else {
    videoElement.pause()
  }
}
</code></pre>
<p>We update the state like:</p>
<pre><code class="language-js">togglePlay(){
  this.playing = !this.playing;
}
</code></pre>
<p>And listen to when <code>playing</code> changes and update the <code>video</code> element like:</p>
<pre><code class="language-js">viewModel.listenTo(&quot;playing&quot;, function(ev, isPlaying){
  if( isPlaying ) {
    videoElement.play()
  } else {
    videoElement.pause()
  }
})
</code></pre>
<p>This means that you need to:</p>
<ol>
<li>Listen to when the <code>&lt;div&gt;</code> is clicked and call a ViewModel method that updates the <code>playing</code> state.</li>
<li>Listen to when the <code>playing</code> state changes and update the state of the <code>&lt;video&gt;</code> element.</li>
</ol>
<p>You already know everything you need to know for step <strong>#1</strong>.</p>
<p>For step <strong>#2</strong>, you need to use the <a href="../../can-component/connectedCallback.html" title="A lifecycle hook called after the component's element is inserted into the document.">connectedCallback</a> lifecycle hook. This
hook gives you access to the component's element and is a good place to do side-effects. Its use looks
like this:</p>
<pre><code class="language-js">ViewModel: {
  ...
  connectedCallback(element) {
    // perform mischief
  }
}
</code></pre>
<p><code>connectedCallback</code> gets called once the component's <code>element</code> is in the page. You can use
<a href="../../can-event-queue/map/map.listenTo.html" title="Listen to an event and register the binding for simplified unbinding.">listenTo</a> to listen to changes in the <code>ViewModel</code>'s properties and
perform side-effects. The following listens to when <code>playing</code> changes:</p>
<pre><code class="language-js">ViewModel: {
  ...
  connectedCallback(element) {
    this.listenTo(&quot;playing&quot;, function(ev, isPlaying){

    })
  }
}
</code></pre>
<p>Use <code>querySelector</code> to get the <code>&lt;video&gt;</code> element from the <code>&lt;video-player&gt;</code> like:</p>
<pre><code class="language-js">element.querySelector(&quot;video&quot;)
</code></pre>
<p><code>&lt;video&gt;</code> elements have a <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/play">.play()</a> and <code>.pause()</code> methods that can start and stop a video.</p>
<h3>The solution</h3>
<p>Update the <strong>JavaScript</strong> tab to:</p>
<pre><code class="language-js">can.Component.extend({
  tag: 'video-player',
  view: `
    &lt;video controls
      on:play=&quot;play()&quot;
      on:pause=&quot;pause()&quot;&gt;
      &lt;source src=&quot;{{src}}&quot;/&gt;
    &lt;/video&gt;
    &lt;div&gt;
      &lt;button on:click=&quot;togglePlay()&quot;&gt;
        {{#if(playing)}}Pause{{else}}Play{{/if}}
      &lt;/button&gt;
    &lt;/div&gt;
    `,
  ViewModel: {
    src: 'string',
    playing: &quot;boolean&quot;,

    play() {
      this.playing = true;
    },
    pause() {
      this.playing = false;
    },
    togglePlay() {
      this.playing = !this.playing;
    },

    connectedCallback(element){
      this.listenTo(&quot;playing&quot;, function(ev, isPlaying){
        if (isPlaying) {
          element.querySelector(&quot;video&quot;).play();
        } else {
          element.querySelector(&quot;video&quot;).pause();
        }
      });
    }
  }
});

</code></pre>
<p><span line-highlight='10,25-28,29-37,only'></span></p>
<h2>Show current time and duration</h2>
<h3>The problem</h3>
<p>Show the current time and duration of the video element.  The time and duration should be
formatted like: <code>mm:SS</code>. They should be presented within two spans like:</p>
<pre><code class="language-js">&lt;/button&gt;
&lt;span&gt;1:22&lt;/span&gt;
&lt;span&gt;2:45&lt;/span&gt;
</code></pre>
<h3>What you need to know</h3>
<ol>
<li><p>Methods can be used to format values in <a href="../../can-stache.html" title="Live binding Mustache and Handlebars-compatible templates.">can-stache</a>. For example, you can uppercase values like  this:</p>
<pre><code class="language-HTML">&lt;span&gt;{{upper(value)}}&lt;/span&gt;
</code></pre>
<p>With a method like:</p>
<pre><code class="language-js">ViewModel: {
  ...
  upper(value){
    return value.toString().toUpperCase();
  }
}
</code></pre>
<p>The following can be used to format time:</p>
<pre><code class="language-js">formatTime(time) {
    if (time === null || time === undefined) {
      return &quot;--&quot;
    }
    const durmins = Math.floor(time / 60);
    let dursecs = Math.floor(time - durmins * 60);
    if (dursecs &lt; 10) {
      dursecs = &quot;0&quot; + dursecs;
    }
    return durmins + &quot;:&quot; + dursecs
}
</code></pre></li>
<li><p>Time is given as a number. Use the following to create a number property on
the <code>ViewModel</code>:</p>
<pre><code class="language-js">ViewModel: {
  ...
  duration: &quot;number&quot;,
  currentTime: &quot;number&quot;
}
</code></pre></li>
<li><p><code>&lt;video&gt;</code> elements emit a <code>loadmetadata</code> event when they know how long
the video is. They also emit a <code>timeupdate</code> event when the video's current play position
changes.</p>
<p><code>videoElement.duration</code> reads the duration of a video.</p>
<p><code>videoElement.currentTime</code> reads the current play position of a video.</p></li>
<li><p>You can get the element in an stache <code>on:event</code> binding with <a href="../../can-stache/keys/scope.html" title="The template context">scope</a>.element like:</p>
<pre><code class="language-HTML">&lt;video on:timeupdate=&quot;updateTimes(scope.element)&quot;/&gt;
</code></pre></li>
</ol>
<h3>The solution</h3>
<p>Update the <strong>JavaScript</strong> tab to:</p>
<pre><code class="language-js">can.Component.extend({
  tag: 'video-player',
  view: `
    &lt;video controls
      on:play=&quot;play()&quot;
      on:pause=&quot;pause()&quot;
      on:timeupdate=&quot;updateTimes(scope.element)&quot;
      on:loadedmetadata=&quot;updateTimes(scope.element)&quot;&gt;
      &lt;source src=&quot;{{src}}&quot;/&gt;
    &lt;/video&gt;
    &lt;div&gt;
      &lt;button on:click=&quot;togglePlay()&quot;&gt;
        {{#if(playing)}}Pause{{else}}Play{{/if}}
      &lt;/button&gt;
      &lt;span&gt;{{formatTime(currentTime)}}&lt;/span&gt; /
      &lt;span&gt;{{formatTime(duration)}} &lt;/span&gt;
    &lt;/div&gt;
    `,
  ViewModel: {
    src: 'string',
    playing: &quot;boolean&quot;,
    duration: &quot;number&quot;,
    currentTime: &quot;number&quot;,

    updateTimes(videoElement) {
      this.currentTime = videoElement.currentTime || 0;
      this.duration = videoElement.duration;
    },
    formatTime(time) {
      if (time === null || time === undefined) {
        return &quot;--&quot;
      }
      const durmins = Math.floor(time / 60);
      let dursecs = Math.floor(time - durmins * 60);
      if (dursecs &lt; 10) {
        dursecs = &quot;0&quot; + dursecs;
      }
      return durmins + &quot;:&quot; + dursecs
    },
    play() {
      this.playing = true;
    },
    pause() {
      this.playing = false;
    },
    togglePlay() {
      this.playing = !this.playing;
    },

    connectedCallback(element){
      this.listenTo(&quot;playing&quot;, function(ev, isPlaying){
        if (isPlaying) {
          element.querySelector(&quot;video&quot;).play();
        } else {
          element.querySelector(&quot;video&quot;).pause();
        }
      });
    }
  }
});

</code></pre>
<p><span line-highlight='7,8,15,16,22-39,only'></span></p>
<h2>Make range show position slider at current time</h2>
<h3>The problem</h3>
<p>Create a <code>&lt;input type=&quot;range&quot;/&gt;</code> element that changes its position as
the video playing position changes.</p>
<p>The <code>&lt;input type=&quot;range&quot;/&gt;</code> element should be after the <code>&lt;button&gt;</code> and before the
<code>currentTime</code> span like:</p>
<pre><code class="language-html">&lt;/button&gt;
&lt;input type=&quot;range&quot;/&gt;
&lt;span&gt;{{formatTime(currentTime)}}&lt;/span&gt; /
</code></pre>
<h3>What you need to know</h3>
<ul>
<li><p>The range input can have an initial value, max value, and step size
specified like:</p>
<pre><code class="language-HTML">&lt;input type=&quot;range&quot; value=&quot;0&quot; max=&quot;1&quot; step=&quot;any&quot;/&gt;
</code></pre></li>
<li><p>The range will have values from 0 to 1.  We will need to translate the currentTime to
a number between 0 and 1. We can do this with a virtual property like:</p>
<pre><code class="language-js">ViewModel: {
  ...
  get percentComplete() {
    return this.currentTime / this.duration;
  },
}
</code></pre></li>
<li><p>Use <a href="../../can-stache-bindings.toChild.html" title="One-way bind a value in the parent scope to the ViewModel or element.">toChild:from</a> to update a value from a ViewModel property like:</p>
<pre><code class="language-html">&lt;input value:from=&quot;percentComplete&quot;/&gt;
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update the <strong>JavaScript</strong> tab to:</p>
<pre><code class="language-js">can.Component.extend({
  tag: 'video-player',
  view: `
    &lt;video controls
      on:play=&quot;play()&quot;
      on:pause=&quot;pause()&quot;
      on:timeupdate=&quot;updateTimes(scope.element)&quot;
      on:loadedmetadata=&quot;updateTimes(scope.element)&quot;&gt;
      &lt;source src=&quot;{{src}}&quot;/&gt;
    &lt;/video&gt;
    &lt;div&gt;
      &lt;button on:click=&quot;togglePlay()&quot;&gt;
        {{#if(playing)}}Pause{{else}}Play{{/if}}
      &lt;/button&gt;
      &lt;input type=&quot;range&quot; value=&quot;0&quot; max=&quot;1&quot; step=&quot;any&quot;
             value:from=&quot;percentComplete&quot;/&gt;
      &lt;span&gt;{{formatTime(currentTime)}}&lt;/span&gt; /
      &lt;span&gt;{{formatTime(duration)}} &lt;/span&gt;
    &lt;/div&gt;
    `,
  ViewModel: {
    src: 'string',
    playing: &quot;boolean&quot;,
    duration: &quot;number&quot;,
    currentTime: &quot;number&quot;,

    get percentComplete() {
      return this.currentTime / this.duration;
    },

    updateTimes(videoElement) {
      this.currentTime = videoElement.currentTime || 0;
      this.duration = videoElement.duration;
    },
    formatTime(time) {
      if (time === null || time === undefined) {
        return &quot;--&quot;
      }
      const durmins = Math.floor(time / 60);
      let dursecs = Math.floor(time - durmins * 60);
      if (dursecs &lt; 10) {
        dursecs = &quot;0&quot; + dursecs;
      }
      return durmins + &quot;:&quot; + dursecs
    },
    play() {
      this.playing = true;
    },
    pause() {
      this.playing = false;
    },
    togglePlay() {
      this.playing = !this.playing;
    },

    connectedCallback(element){
      this.listenTo(&quot;playing&quot;, function(ev, isPlaying){
        if (isPlaying) {
          element.querySelector(&quot;video&quot;).play();
        } else {
          element.querySelector(&quot;video&quot;).pause();
        }
      });
    }
  }
});

</code></pre>
<p><span line-highlight='15-16,27-29,only'></span></p>
<h2>Make sliding the range update the current time</h2>
<h3>The problem</h3>
<p>In this section we will:</p>
<ul>
<li>Remove the native controls from the video player.  We don't need them anymore!</li>
<li>Make it so when a user moves the range slider, the video position updates.</li>
</ul>
<h3>What you need to know</h3>
<p>Similar to when we <a href="#Makeclickingtheplay_pausebuttonplayorpausethevideo">made the play/pause button play or pause the video</a>, we will want to update the
<code>currentTime</code> property and then listen to when <code>currentTime</code> changes and update the  <code>&lt;video&gt;</code>
element's <code>currentTime</code> as a <em>side-effect</em>.</p>
<p>This time, we need to translate the sliders values between 0 and 1 to <code>currentTime</code>
values. We can do this by creating a <code>percentComplete</code> <a href="../../can-define.types.set.html" title="Specify what happens when a property value is set.">setter</a> that updates <code>currentTime</code> like:</p>
<pre><code class="language-js">ViewModel:{
  ...
  get percentComplete() {
    return this.currentTime / this.duration;
  },
  set percentComplete(newVal) {
    this.currentTime = newVal * this.duration;
  },
  ...
}
</code></pre>
<p>Use <a href="../../can-stache-bindings.twoWay.html" title="Two-way bind a value in the viewModel or the element to the parent scope.">twoWay:bind</a> to two-way bind a value to a <code>ViewModel</code> property:</p>
<pre><code class="language-html">&lt;input value:bind=&quot;someViewModelProperty&quot;/&gt;
</code></pre>
<h3>The solution</h3>
<p>Update the <strong>JavaScript</strong> tab to:</p>
<pre><code class="language-js">can.Component.extend({
  tag: 'video-player',
  view: `
    &lt;video
      on:play=&quot;play()&quot;
      on:pause=&quot;pause()&quot;
      on:timeupdate=&quot;updateTimes(scope.element)&quot;
      on:loadedmetadata=&quot;updateTimes(scope.element)&quot;&gt;
      &lt;source src=&quot;{{src}}&quot;/&gt;
    &lt;/video&gt;
    &lt;div&gt;
      &lt;button on:click=&quot;togglePlay()&quot;&gt;
        {{#if(playing)}}Pause{{else}}Play{{/if}}
      &lt;/button&gt;
      &lt;input type=&quot;range&quot; value=&quot;0&quot; max=&quot;1&quot; step=&quot;any&quot;
             value:bind=&quot;percentComplete&quot;/&gt;
      &lt;span&gt;{{formatTime(currentTime)}}&lt;/span&gt; /
      &lt;span&gt;{{formatTime(duration)}} &lt;/span&gt;
    &lt;/div&gt;
    `,
  ViewModel: {
    src: 'string',
    playing: &quot;boolean&quot;,
    duration: &quot;number&quot;,
    currentTime: &quot;number&quot;,

    get percentComplete() {
      return this.currentTime / this.duration;
    },
    set percentComplete(newVal) {
     this.currentTime = newVal * this.duration;
    },

    updateTimes(videoElement) {
      this.currentTime = videoElement.currentTime || 0;
      this.duration = videoElement.duration;
    },
    formatTime(time) {
      if (time === null || time === undefined) {
        return &quot;--&quot;
      }
      const durmins = Math.floor(time / 60);
      let dursecs = Math.floor(time - durmins * 60);
      if (dursecs &lt; 10) {
        dursecs = &quot;0&quot; + dursecs;
      }
      return durmins + &quot;:&quot; + dursecs
    },
    play() {
      this.playing = true;
    },
    pause() {
      this.playing = false;
    },
    togglePlay() {
      this.playing = !this.playing;
    },

    connectedCallback(element){
      this.listenTo(&quot;playing&quot;, function(ev, isPlaying){
        if (isPlaying) {
          element.querySelector(&quot;video&quot;).play();
        } else {
          element.querySelector(&quot;video&quot;).pause();
        }
      });
      this.listenTo(&quot;currentTime&quot;, function(ev, currentTime){
        element.querySelector(&quot;video&quot;).currentTime = currentTime;
      });
    }
  }
});

</code></pre>
<p><span line-highlight='4,16,30-32,67-69,only'></span></p>
<script src="https://static.jsbin.com/js/embed.min.js?4.1.2"></script>

</section>

  


<script type="text/javascript">
  window.docObject = {"src":{"path":"docs/can-guides/commitment/recipes/video-player/video-player.md"},"description":"This guide walks you through building custom video controls around a video element.\n\n\n","name":"guides/recipes/video-player","title":"Video Player (Simple)","type":"page","parent":"guides/recipes","comment":" ","pathToRoot":"../../.."};
</script>
</article>
      
        <footer><p>CanJS is part of <a href="https://donejs.com" target="_blank">DoneJS</a>. Created and maintained by the core <a href="https://donejs.com/About.html#team" target="_blank">DoneJS team</a> and <a href="https://www.bitovi.com" target="_blank">Bitovi</a>. <strong>Currently 4.2.0.</strong></p>
</footer>
      
    </div>
  </div>
</div>
<survey-ad>
  <button aria-label="Close" class="close" type="button">
    <span aria-hidden="true">&times;</span>
  </button>
  <a href="https://donejs.com/survey.html" target="_blank">
    Help us improve CanJS by taking our community survey
  </a>
</survey-ad>


		
			<script>
				steal = {
				  	instantiated: {
				    	"bundles/bit-docs-site/static.css!$css" : null
				  	}
			  	};
			</script>
			<script type='text/javascript' data-main="bit-docs-site/static" src="../../static/steal.production.js"></script>
		
		<script async defer src="https://buttons.github.io/buttons.js"></script>

		<!-- root-level elements with attributes necessary for the app -->
		<div path-prefix="../.."></div>

	</body>
</html>
